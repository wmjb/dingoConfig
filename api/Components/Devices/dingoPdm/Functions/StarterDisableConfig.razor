@using domain.Devices.dingoPdm.Functions
@using domain.Devices.dingoPdm.Enums

<MudCard Outlined="true" Class="mb-2">
    <MudCardContent>
        <MudGrid Spacing="5">
            <MudItem>
                <MudCard Elevation="4" Style="width: 250px; height: 100%">
                    <MudCardHeader>
                        <MudText Typo="Typo.h6" Class="mt-2">Enable</MudText>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudTextField @bind-Value="StarterDisable.Name"
                                      Label="Name"
                                      Variant="Variant.Outlined"/>
                        <MudSwitch @bind-Value="StarterDisable.Enabled"
                                   Label="Enabled"
                                   Color="Color.Primary"/>
                        <MudSelect @bind-Value="StarterDisable.Input"
                                   Label="Input Source"
                                   Variant="Variant.Outlined"
                                   T="VarMap">
                            @foreach (VarMap varMap in Enum.GetValues(typeof(VarMap)))
                            {
                                <MudSelectItem Value="@varMap">@varMap</MudSelectItem>
                            }
                        </MudSelect>
                    </MudCardContent>
                </MudCard>
            </MudItem>

            <MudItem>
                <MudCard Elevation="4" Style="width: 250px; height: 100%">
                    <MudCardHeader>
                        <MudText Typo="Typo.h6" Class="mt-2">Disable</MudText>
                    </MudCardHeader>
                    <MudCardContent>
                        @for (var i = 0; i < StarterDisable.OutputsDisabled.Count; i++)
                        {
                            var index = i; // Capture loop variable to avoid closure issues
                            <MudSwitch T="bool"
                                       @bind-Value="@StarterDisable.OutputsDisabled[index]"
                                       Label="@($"Output {index + 1}")"
                                       Color="Color.Primary"/>
                        }
                    </MudCardContent>
                </MudCard>
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

@code {
    [Parameter, EditorRequired] public StarterDisable StarterDisable { get; set; } = null!;
}
